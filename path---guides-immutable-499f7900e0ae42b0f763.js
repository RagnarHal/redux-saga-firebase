webpackJsonp([71904975636495],{1123:function(n,s){n.exports={data:{site:{siteMetadata:{docsDirectory:"docs",github:{url:"https://github.com/n6g7/redux-saga-firebase"}}},file:{base:"immutable.md",sourceInstanceName:"guides",markdown:{html:'<p>Firebase\'s js SDK returns class instances instead of object literals in many cases.\nFor example <a href="https://firebase.google.com/docs/reference/js/firebase.auth.Auth#onAuthStateChanged"><code>onAuthStateChanged</code></a> returns a <a href="https://firebase.google.com/docs/reference/js/firebase.User"><code>firebase.User</code></a> instance and not an object literal.</p>\n<p>When using <a href="https://facebook.github.io/immutable-js/">Immutable.js</a>, you won\'t be able to save those instances directly in the redux store because Immutable doesn\'t know how to serialize them.\nTo solve you\'ll need to serialize them using firebase\'s API (eg. <a href="https://firebase.google.com/docs/reference/js/firebase.User#toJSON"><code>firebase.User.toJSON()</code></a>).</p>\n<div class="gatsby-highlight">\n      <pre class="language-js"><code class="language-js"><span class="token keyword">function</span> syncUserSaga <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">const</span> channel <span class="token operator">=</span> <span class="token keyword">yield</span> <span class="token function">call</span><span class="token punctuation">(</span>rsf<span class="token punctuation">.</span>auth<span class="token punctuation">.</span>channel<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> <span class="token punctuation">{</span> error<span class="token punctuation">,</span> user <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">yield</span> <span class="token function">take</span><span class="token punctuation">(</span>channel<span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">if</span> <span class="token punctuation">(</span>user<span class="token punctuation">)</span> <span class="token keyword">yield</span> <span class="token function">put</span><span class="token punctuation">(</span><span class="token function">syncUser</span><span class="token punctuation">(</span>\n      user<span class="token punctuation">.</span><span class="token function">toJSON</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">// ðŸ‘ˆ manual serialization happens here</span>\n    <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">else</span> <span class="token keyword">yield</span> <span class="token function">put</span><span class="token punctuation">(</span><span class="token function">syncError</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n</code></pre>\n      </div>\n<p>For more details, checkout <a href="https://github.com/n6g7/redux-saga-firebase/issues/78">issue#78</a>.</p>',frontmatter:{title:"Using with Immutable.js"}}}},pathContext:{fileName:"immutable"}}}});
//# sourceMappingURL=path---guides-immutable-499f7900e0ae42b0f763.js.map